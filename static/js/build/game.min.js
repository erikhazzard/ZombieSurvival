(function(){GAME.LOGGER={},GAME.LOGGER.options={log_level:"all"},GAME.LOGGER.history={},GAME.LOGGER.can_log=function(e){var t,n;return n=!1,t=GAME.LOGGER.options.log_level,t==="all"||t===!0?n=!0:t instanceof Array?t.indexOf(e)>-1&&(n=!0):t===null||t===void 0||t==="none"||t===!1?n=!1:t===e&&(n=!0),n},GAME.LOGGER.log=function(e){var t,n,r;t=Array.prototype.slice.call(arguments);if(e==null||arguments.length===1)e="debug",t.splice(0,0,"debug");return GAME.LOGGER.can_log(e)?(n=new Date,t.push({Date:n,Milliseconds:n.getMilliseconds(),Time:n.getTime()}),r=GAME.LOGGER.history,r[e]=r[e]||[],r[e].push(t),window.console&&console.log(Array.prototype.slice.call(t)),!0):!1},GAME.LOGGER.options.log_types=["debug","error","info","warn"],GAME.LOGGER.options.setup_log_types=function(){var e,t,n,r,i;GAME.LOGGER.log("logger","setupt_log_types()","Called setup log types!"),r=GAME.LOGGER.options.log_types,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(function(e){return GAME.LOGGER[e]=function(){var t;return t=Array.prototype.slice.call(arguments),t.splice(0,0,e),GAME.LOGGER.log.apply(null,t)}}(e));return i},GAME.LOGGER.options.setup_log_types(),window&&(window.console&&GAME.LOGGER.options&&(GAME.LOGGER.options.log_level==="none"||GAME.LOGGER.options.log_level===null)&&(console.log=function(){return{}}),window.console==null&&(window.console={log:function(){return{}}}),window.onerror=function(e,t,n){return GAME.LOGGER.error(e,t,n),!1})}).call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=Object.prototype.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};GAME.Models.World=function(t){function r(){this.initialize=e(this.initialize,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.defaults={currentCellGeneration:null,canvas:null,drawingContext:null,tickLength:100,tickNum:0,cellSize:12,numberOfRows:50,numberOfColumns:50,seedProbability:.4,rules:{stayAlive:[2,3],birth:[3]},toroidal:!0,showTrails:!0},r.prototype.initialize=function(){return this},r}(Backbone.Model)}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=Object.prototype.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};GAME.Views.World=function(t){function r(){this.tick=e(this.tick,this),r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.initialize=function(){return this.canvas=null,this},r.prototype.render=function(){return this.createCanvas(),this.resizeCanvas(),this.createDrawingContext(),this.seed(),this.tick(),this},r.prototype.createCanvas=function(){var e=this;return this.canvas=document.createElement("canvas"),this.canvas.addEventListener("click",function(t){var n,r,i,s,o,u,a,f,l,c,h,p;c=t.x-e.canvas.offsetLeft,h=t.y-e.canvas.offsetTop,n=Math.round(Math.floor(c/e.model.get("cellSize"))),r=Math.round(Math.floor(h/e.model.get("cellSize"))),s=e.model.get("currentCellGeneration"),s[r][n].isAlive=!0,u=Math.max(r-1,0),l=Math.min(r+1,e.model.get("numberOfRows")-1),o=Math.max(n-1,0),f=Math.min(n+1,e.model.get("numberOfColumns")-1),p=[];for(a=u;u<=l?a<=l:a>=l;u<=l?a++:a--)p.push(function(){var e;e=[];for(i=o;o<=f?i<=f:i>=f;o<=f?i++:i--)e.push(s[a][i].isAlive=!0);return e}());return p}),document.body.appendChild(this.canvas)},r.prototype.resizeCanvas=function(){return this.canvas.width=this.model.get("cellSize")*this.model.get("numberOfColumns"),this.canvas.height=this.model.get("cellSize")*this.model.get("numberOfRows")},r.prototype.createDrawingContext=function(){return this.drawingContext=this.canvas.getContext("2d")},r.prototype.seed=function(){var e,t,n,r,i,s;t=[];for(n=0,i=this.model.get("numberOfRows");0<=i?n<i:n>i;0<=i?n++:n--){t[n]=[];for(e=0,s=this.model.get("numberOfColumns");0<=s?e<s:e>s;0<=s?e++:e--)r=this.createSeedCell(n,e),t[n][e]=r}return this.model.set("currentCellGeneration",t),this},r.prototype.createSeedCell=function(e,t){return{isAlive:Math.random()<this.model.get("seedProbability"),row:e,column:t}},r.prototype.tick=function(){return requestAnimFrame(this.tick),this.drawGrid(),this.updateCurrentGeneration()},r.prototype.drawGrid=function(){var e,t,n,r;r=[];for(t=0,n=this.model.get("numberOfRows");0<=n?t<n:t>n;0<=n?t++:t--)r.push(function(){var n,r;r=[];for(e=0,n=this.model.get("numberOfColumns");0<=n?e<n:e>n;0<=n?e++:e--)r.push(this.drawCell(this.model.get("currentCellGeneration")[t][e]));return r}.call(this));return r},r.prototype.drawCell=function(e){var t,n,r,i;return t=this.model.get("cellSize"),r=e.column*t,i=e.row*t,e.isAlive?this.showTrails?n="rgba(100,200,100,0.7)":n="rgb(100,200,100)":this.showTrails?n="rgba(125,125,125,0.8)":n="rgb(125,125,125)",this.drawingContext.strokeStyle="rgb(100,100,100)",this.drawingContext.strokeRect(r,i,t,t),this.drawingContext.fillStyle=n,this.drawingContext.fillRect(r,i,t,t),this},r.prototype.evolveCell=function(e){var t,n;return t={row:e.row,column:e.column,isAlive:e.isAlive},n=this.countAliveNeighbors(e),e.isAlive&&this.model.get("rules").stayAlive.indexOf(n)>-1?t.isAlive=!0:this.model.get("rules").birth.indexOf(n)>-1?t.isAlive=!0:t.isAlive=!1,t},r.prototype.updateCurrentGeneration=function(){var e,t,n,r,i,s;n={};for(r=0,i=this.model.get("numberOfRows");0<=i?r<i:r>i;0<=i?r++:r--){n[r]=[];for(e=0,s=this.model.get("numberOfColumns");0<=s?e<s:e>s;0<=s?e++:e--)t=this.evolveCell(this.model.get("currentCellGeneration")[r][e]),n[r][e]=t}return this.model.set("currentCellGeneration",n)},r.prototype.countAliveNeighbors=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;l=this.model.get("numberOfRows"),f=this.model.get("numberOfColumns"),u=Math.max(e.row-1,0),v=Math.min(e.row+1,l-1),o=Math.max(e.column-1,0),d=Math.min(e.column+1,f-1),a=0;if(this.toroidal){h=e.row-1,p=e.row+1,t=e.column-1,n=e.column+1;for(s=h;h<=p?s<=p:s>=p;h<=p?s++:s--)for(i=t;t<=n?i<=n:i>=n;t<=n?i++:i--){if(s===e.row&&i===e.column)continue;c=s,r=i,c<0?c=l-1:c>l?c=0:c>l-1&&(c=0),r<0?r=f-1:r>f?r=0:r>f-1&&(r=0),this.model.get("currentCellGeneration")[c][r].isAlive&&(a+=1)}}else for(c=u;u<=v?c<=v:c>=v;u<=v?c++:c--)for(r=o;o<=d?r<=d:r>=d;o<=d?r++:r--){if(c===e.row&&r===e.column)continue;this.model.get("currentCellGeneration")[c][r].isAlive&&(a+=1)}return a},r}(Backbone.View)}.call(this),function(){requirejs.config({shim:{"lib/backbone":{deps:["lib/underscore","lib/jquery"],exports:"Backbone"}}}),require(["jquery","models/world","views/world"],function(e,t,n){var r,i;return r=new t,i=new n({model:r}),i.render()})}.call(this);